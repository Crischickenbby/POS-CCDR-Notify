# üöÄ GU√çA COMPLETA PARA PROYECTOS PYTHON/FLASK
# Cristian - Gu√≠a de Referencia para Proyectos Futuros
# Fecha: Octubre 2025

================================================================================
üìã CHECKLIST INICIAL - ANTES DE EMPEZAR CUALQUIER PROYECTO
================================================================================

‚ñ° Crear carpeta del proyecto
‚ñ° Crear entorno virtual (venv)
‚ñ° Activar entorno virtual  
‚ñ° Crear .gitignore
‚ñ° Crear .env
‚ñ° Crear requirements.txt
‚ñ° Inicializar git (git init)
‚ñ° Primer commit

================================================================================
üîß COMANDOS ESENCIALES PARA CUALQUIER PROYECTO PYTHON
================================================================================

## 1. CREAR Y CONFIGURAR ENTORNO VIRTUAL
```bash
# Crear proyecto
mkdir mi_nuevo_proyecto
cd mi_nuevo_proyecto

# Crear entorno virtual
python -m venv venv

# ACTIVAR entorno virtual
# Windows PowerShell:
venv\Scripts\Activate.ps1
# Windows CMD:
venv\Scripts\activate.bat
# Linux/Mac:
source venv/bin/activate

# Verificar que est√° activo (debe aparecer (venv) al inicio)
```

## 2. INSTALACI√ìN DE PAQUETES
```bash
# Instalar paquetes b√°sicos para Flask
pip install flask
pip install python-dotenv
pip install psycopg2  # Para PostgreSQL

# IMPORTANTE: Guardar dependencias
pip freeze > requirements.txt

# En proyectos futuros: instalar desde requirements.txt
pip install -r requirements.txt
```

## 3. VERIFICACI√ìN DEL ENTORNO
```bash
# Verificar Python y paquetes instalados
python -c "import sys; print('Python:', sys.version); import flask; print('Flask:', flask.__version__)"

# Verificar conexi√≥n a base de datos (si aplica)
python -c "from config import get_db_connection; conn = get_db_connection(); print('‚úÖ DB conectada')"
```

================================================================================
üìÅ ARCHIVOS OBLIGATORIOS EN CADA PROYECTO
================================================================================

## 1. .gitignore (SIEMPRE crear primero)
```gitignore
# Entorno virtual
venv/
env/
.venv/
ENV/

# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python

# Configuraci√≥n sensible
.env
.env.local
.env.production
*.ini

# Base de datos
*.db
*.sqlite3
instance/

# Logs
*.log
logs/

# Sistema
.DS_Store
Thumbs.db

# IDEs
.vscode/
.idea/
*.swp
*.swo

# Flask espec√≠fico
instance/
.webassets-cache

# Si usas Node.js
node_modules/
npm-debug.log
```

## 2. .env (Configuraci√≥n sensible)
```env
# Base de datos
DB_HOST=localhost
DB_NAME=nombre_de_tu_bd
DB_USER=tu_usuario
DB_PASSWORD=tu_password

# Flask
SECRET_KEY=clave_super_secreta_y_larga_minimo_32_caracteres
DEBUG=True

# APIs externas (ejemplos)
OPENAI_API_KEY=sk-...
STRIPE_SECRET_KEY=sk_test_...
EMAIL_PASSWORD=password_de_email
```

## 3. config.py (Configuraci√≥n del proyecto)
```python
import os
from dotenv import load_dotenv

# Cargar variables de entorno
load_dotenv()

# Configuraci√≥n de la base de datos
DB_HOST = os.getenv('DB_HOST', 'localhost')
DB_NAME = os.getenv('DB_NAME', 'mi_base_datos')
DB_USER = os.getenv('DB_USER', 'postgres')
DB_PASSWORD = os.getenv('DB_PASSWORD', '')

# Clave secreta para Flask
SECRET_KEY = os.getenv('SECRET_KEY', 'clave-por-defecto-cambiar')

# Funci√≥n para obtener conexi√≥n a BD (PostgreSQL)
def get_db_connection():
    import psycopg2
    return psycopg2.connect(
        host=DB_HOST,
        database=DB_NAME,
        user=DB_USER,
        password=DB_PASSWORD
    )
```

## 4. requirements.txt (Dependencias)
```txt
# Flask b√°sico
Flask==3.1.2
python-dotenv==1.1.1

# Base de datos
psycopg2==2.9.10

# Seguridad (recomendado)
werkzeug==3.1.3

# Otros comunes
requests>=2.31.0
```

================================================================================
üîí SEGURIDAD - QUE HACER Y NO HACER
================================================================================

## ‚úÖ QUE S√ç HACER:
- SIEMPRE usar entornos virtuales
- SIEMPRE crear .gitignore antes del primer commit
- SIEMPRE usar .env para credenciales
- SIEMPRE hashear contrase√±as con bcrypt
- SIEMPRE validar inputs del usuario
- SIEMPRE usar requirements.txt

## ‚ùå QUE NUNCA HACER:
- ‚ùå NUNCA subir .env a GitHub
- ‚ùå NUNCA hardcodear passwords en el c√≥digo
- ‚ùå NUNCA guardar contrase√±as en texto plano
- ‚ùå NUNCA usar SECRET_KEY por defecto en producci√≥n
- ‚ùå NUNCA instalar paquetes sin venv activado

## üö® ERRORES CR√çTICOS DE SEGURIDAD:
```python
# ‚ùå MAL - Contrase√±a en texto plano
password = "123456"

# ‚úÖ BIEN - Contrase√±a hasheada
from werkzeug.security import generate_password_hash, check_password_hash
password_hash = generate_password_hash("123456")
```

================================================================================
üîç COMANDOS DE VERIFICACI√ìN Y DEBUGGING
================================================================================

## Verificar estado del proyecto:
```bash
# Ver qu√© est√° instalado
pip list

# Ver estado de git
git status

# Verificar entorno virtual activo
where python  # Windows
which python  # Linux/Mac

# Probar imports importantes
python -c "import flask, psycopg2, dotenv; print('‚úÖ Todo OK')"

# Ver conexi√≥n a BD
python -c "from config import get_db_connection; get_db_connection(); print('‚úÖ BD OK')"
```

## Debugging com√∫n:
```bash
# Si no encuentra m√≥dulos
pip install nombre_del_modulo

# Si problemas con venv
deactivate
venv\Scripts\activate

# Si problemas con .env
python -c "import os; print(os.getenv('SECRET_KEY'))"

# Ver logs de Flask
export FLASK_DEBUG=1  # Linux/Mac
set FLASK_DEBUG=1     # Windows
```

================================================================================
üöÄ CONFIGURACI√ìN DE VS CODE PARA PROYECTOS
================================================================================

## .vscode/settings.json (Configuraci√≥n por proyecto)
```json
{
  "python.defaultInterpreterPath": "./venv/Scripts/python.exe",
  "python.linting.enabled": true,
  "python.linting.pylintEnabled": true,
  "python.formatting.provider": "black",
  
  "tailwindCSS.includeLanguages": {
    "html": "html",
    "javascript": "javascript",
    "css": "css"
  },
  "css.validate": false,
  "css.lint.unknownAtDirectives": "ignore",
  
  "files.exclude": {
    "**/__pycache__": true,
    "**/venv": true,
    "**/.git": true
  }
}
```

## tailwind.config.js (Si usas Tailwind)
```javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    "./templates/**/*.html",
    "./static/js/**/*.js",
    "./**/*.html"
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

================================================================================
üì¶ ESTRUCTURA RECOMENDADA DE PROYECTOS FLASK
================================================================================

```
mi_proyecto/
‚îÇ
‚îú‚îÄ‚îÄ venv/                    # Entorno virtual (no subir a git)
‚îú‚îÄ‚îÄ app/                     # C√≥digo de la aplicaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ templates/           # Archivos HTML
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ static/              # CSS, JS, im√°genes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ img/
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ
‚îú‚îÄ‚îÄ .env                     # Variables de entorno (no subir a git)
‚îú‚îÄ‚îÄ .gitignore              # Archivos a ignorar en git
‚îú‚îÄ‚îÄ config.py               # Configuraci√≥n del proyecto
‚îú‚îÄ‚îÄ app.py                  # Archivo principal de Flask
‚îú‚îÄ‚îÄ requirements.txt        # Dependencias del proyecto
‚îî‚îÄ‚îÄ README.md              # Documentaci√≥n del proyecto
```

================================================================================
üéØ WORKFLOW COMPLETO PARA NUEVO PROYECTO
================================================================================

## Paso a paso:
1. mkdir nuevo_proyecto && cd nuevo_proyecto
2. python -m venv venv
3. venv\Scripts\activate (Windows)
4. Crear .gitignore (copiar de arriba)
5. Crear .env con configuraciones
6. pip install flask python-dotenv psycopg2
7. pip freeze > requirements.txt
8. Crear config.py
9. Crear app.py b√°sico
10. git init
11. git add .gitignore .env.example requirements.txt
12. git commit -m "Initial commit"

## Verificaci√≥n final:
- python -c "import flask; print('‚úÖ Flask OK')"
- python -c "from config import SECRET_KEY; print('‚úÖ Config OK')"
- git status (debe estar limpio)
- pip list (verificar paquetes instalados)

================================================================================
üìö RECURSOS Y COMANDOS √öTILES
================================================================================

## Git b√°sico:
```bash
git init
git add .
git commit -m "mensaje"
git status
git log --oneline
```

## Python virtual environments:
```bash
# Crear venv
python -m venv nombre_venv

# Activar (Windows)
nombre_venv\Scripts\activate

# Desactivar
deactivate

# Eliminar venv
rmdir /s nombre_venv  # Windows
rm -rf nombre_venv    # Linux/Mac
```

## Flask comandos:
```bash
# Ejecutar app
python app.py

# Con debug mode
set FLASK_DEBUG=1 && python app.py

# Usar flask run
set FLASK_APP=app.py && flask run
```

================================================================================
üö® ERRORES COMUNES Y SOLUCIONES
================================================================================

## "Module not found":
- Verificar que venv est√© activado
- pip install modulo_faltante
- pip install -r requirements.txt

## "Permission denied" en PowerShell:
- Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
- Luego: venv\Scripts\Activate.ps1

## Problemas con .env:
- Verificar que python-dotenv est√° instalado
- Verificar que load_dotenv() est√© en config.py
- Verificar sintaxis: VARIABLE=valor (sin espacios)

## Git tracking archivos que no deber√≠a:
- git rm --cached archivo.env
- Agregar archivo al .gitignore
- git commit -m "Remove sensitive file"

================================================================================
‚úÖ CHECKLIST FINAL ANTES DE SUBIR A GITHUB
================================================================================

‚ñ° .env NO est√° en el repositorio
‚ñ° venv/ NO est√° en el repositorio  
‚ñ° requirements.txt est√° actualizado
‚ñ° .gitignore incluye archivos sensibles
‚ñ° Contrase√±as est√°n hasheadas
‚ñ° SECRET_KEY no est√° hardcodeada
‚ñ° README.md explica c√≥mo instalar el proyecto
‚ñ° C√≥digo funciona en entorno limpio

================================================================================
üí° TIPS PROFESIONALES
================================================================================

1. SIEMPRE prueba tu proyecto en un entorno limpio antes de entregarlo
2. Usa nombres descriptivos para variables y funciones
3. Comenta c√≥digo complejo
4. Mant√©n requirements.txt actualizado
5. Haz commits frecuentes con mensajes claros
6. Nunca hagas git add . sin revisar git status primero
7. Testa la instalaci√≥n: pip install -r requirements.txt en venv limpio

================================================================================
üìû COMANDOS DE EMERGENCIA
================================================================================

## Si todo se rompe:
```bash
# Crear venv nuevo
deactivate
rmdir /s venv
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt

# Si git est√° mal
git reset --hard HEAD~1  # Volver al commit anterior
git clean -fd            # Limpiar archivos no trackeados

# Si .env se subi√≥ a git por error
git rm --cached .env
echo ".env" >> .gitignore
git commit -m "Remove .env from tracking"
```

================================================================================
FIN DE LA GU√çA - ¬°GUARDA ESTE ARCHIVO PARA REFERENCIA FUTURA!
================================================================================